version: '3.8'

services:
  books-api:
    image: ${REGISTRY}:${IMAGE_TAG}
    environment:
      FLASK_ENV: production
    # map container’s port 5000 back to the host so Jenkins can curl it
    ports:
      - "5000:5000"
    # in prod you’ll want Gunicorn rather than the Flask dev server:
    command: gunicorn app:app -w 4 -b 0.0.0.0:5000
